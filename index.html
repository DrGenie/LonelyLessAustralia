<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1.0"/>
  <title>LonelyLessAustralia Decision Aid Tool</title>
  <link rel="stylesheet" href="styles.css"/>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
</head>
<body>
<div class="container">
  <header>
    <h1>LonelyLessAustralia Decision Aid Tool</h1>
  </header>

  <div class="tabs">
    <button class="tablink active" onclick="openTab('introTab', this)">Introduction</button>
    <button class="tablink" onclick="openTab('instructionsTab', this)">Instructions</button>
    <button class="tablink" onclick="openTab('attributesTab', this)">Attributes</button>
    <button class="tablink" onclick="openTab('inputsTab', this)">Inputs</button>
    <button class="tablink" onclick="openTab('wtpTab', this)">WTP Results</button>
    <button class="tablink" onclick="openTab('probTab', this)">Program Uptake Probability</button>
    <button class="tablink" onclick="openTab('costsTab', this)">Costs & Benefits</button>
    <button class="tablink" onclick="openTab('scenariosTab', this)">Scenarios</button>
  </div>

  <!-- Introduction Tab -->
  <div id="introTab" class="tabcontent" style="display: block;">
    <div class="intro-box">
      <p>
        Loneliness affects over five million Australians, especially older adults, resulting 
        in serious health and economic challenges. This decision aid tool leverages discrete 
        choice experiment (DCE) estimates to predict programme uptake probabilities, enabling 
        personalised services based on the attributes older adults deem most important.
      </p>
      <p>
        Navigate with the tabs above:
      </p>
      <ul>
        <li><strong>Instructions</strong> – Guidance for each tool feature.</li>
        <li><strong>Attributes</strong> – A detailed description of each DCE attribute.</li>
        <li><strong>Inputs</strong> – Configure your scenario’s cost, accessibility, etc.</li>
        <li><strong>WTP Results</strong> – A bar chart of willingness to pay (A$) for main model attributes, with optional p-values.</li>
        <li><strong>Program Uptake Probability</strong> – Dynamically computed bar chart based on your scenario inputs.</li>
        <li><strong>Costs &amp; Benefits</strong> – Outlines cost-of-living assumptions and A\$5,000 per 1% improvement.</li>
        <li><strong>Scenarios</strong> – Save multiple scenarios, compare them, or export PDF-based results.</li>
      </ul>
    </div>
  </div>

  <!-- Instructions Tab -->
  <div id="instructionsTab" class="tabcontent">
    <h2>How to Use This Tool</h2>
    <p>
      1. Check the <strong>Attributes</strong> tab to understand each dimension of the programme.
    </p>
    <p>
      2. On the <strong>Inputs</strong> tab, choose your state (optional), cost-of-living multipliers, cost per session, 
      accessibility (local/wider), frequency (weekly/monthly), method (virtual/hybrid), duration (2H/4H), 
      and support type (community engagement, counselling, VR).
    </p>
    <p>
      3. Click “Calculate &amp; View Results” to open a new window with cost-benefit charts, 
      predicted programme uptake, and PDF export possibilities.
    </p>
    <p>
      4. The <strong>WTP Results</strong> tab displays a bar chart for the main model’s WTP (A$). 
    </p>
    <p>
      5. The <strong>Program Uptake Probability</strong> tab displays a bar chart for your scenario’s predicted 
      programme uptake. Refresh it after changes to the <strong>Inputs</strong> tab.
    </p>
    <p>
      6. <strong>Costs &amp; Benefits</strong> summarises the A\$5,000 per 1% improvement assumption and relevant cost items.
    </p>
    <p>
      7. Under <strong>Scenarios</strong>, you can save or compare multiple configurations side by side.
    </p>
  </div>

  <!-- Attributes Tab -->
  <div id="attributesTab" class="tabcontent">
    <h2>Programme Attributes</h2>
    <p><strong>Cost per session:</strong> The out-of-pocket fee (in AUD) that participants pay each time they attend.</p>
    <p><strong>Accessibility:</strong> Whether the programme is local (up to 12 km) or in a wider community (50+ km), 
      affecting participants' travel, time, and mobility constraints.</p>
    <p><strong>Frequency of Interaction:</strong> The DCE reference is daily; alternatives are weekly or monthly, 
      impacting how often participants engage socially and the intensity of their interactions.</p>
    <p><strong>Method of Interaction:</strong> In-person, fully virtual, or a hybrid approach, catering for different 
      mobility and technology preferences.</p>
    <p><strong>Duration of Each Interaction:</strong> 30 minutes as a reference, or 2-hour/4-hour sessions, which 
      can alter the depth of engagement, tiredness, or scheduling needs.</p>
    <p><strong>Type of Support Programme:</strong> Ranging from peer support (reference) to community engagement, 
      psychological counselling, or VR, each providing varied social and mental health benefits.</p>
  </div>

  <!-- Inputs Tab -->
  <div id="inputsTab" class="tabcontent">
    <h2>Programme Inputs</h2>
    <p>
      Configure your scenario. Then click “Calculate &amp; View Results” to open a new window 
      with cost-benefit analyses. Or use the “Program Uptake Probability” tab to directly view 
      a bar chart reflecting your current selections.
    </p>
    <form onsubmit="event.preventDefault();">
      <div class="form-grid">
        <div class="form-item">
          <label for="state_select">State:</label>
          <select id="state_select">
            <option value="">None</option>
            <option value="NSW">New South Wales (NSW)</option>
            <option value="VIC">Victoria (VIC)</option>
            <option value="QLD">Queensland (QLD)</option>
            <option value="WA">Western Australia (WA)</option>
            <option value="SA">South Australia (SA)</option>
            <option value="TAS">Tasmania (TAS)</option>
            <option value="ACT">Australian Capital Territory (ACT)</option>
            <option value="NT">Northern Territory (NT)</option>
          </select>
          <br/>
          <label for="adjustCosts">Adjust for Cost of Living?</label>
          <select id="adjustCosts">
            <option value="no">No</option>
            <option value="yes">Yes</option>
          </select>
        </div>

        <div class="form-item">
          <label>
            Cost per Session (AUD): <span id="costLabel">50</span>
          </label>
          <input 
            type="range" 
            id="costSlider" 
            min="0" 
            max="100" 
            step="1" 
            value="50" 
            oninput="updateCostDisplay(this.value)" 
          />
        </div>

        <div class="form-item">
          <label><input type="checkbox" id="localCheck" />Local Area (12 km)</label>
          <br/>
          <label><input type="checkbox" id="widerCheck" />Wider Community (50+ km)</label>
        </div>

        <div class="form-item">
          <label><input type="checkbox" id="weeklyCheck" />Weekly</label>
          <br/>
          <label><input type="checkbox" id="monthlyCheck" />Monthly</label>
        </div>

        <div class="form-item">
          <label><input type="checkbox" id="virtualCheck" />Virtual Only</label>
          <br/>
          <label><input type="checkbox" id="hybridCheck" />Hybrid (In-person &amp; Virtual)</label>
        </div>

        <div class="form-item">
          <label><input type="checkbox" id="twoHCheck" />2-Hour Session</label>
          <br/>
          <label><input type="checkbox" id="fourHCheck" />4-Hour Session</label>
        </div>

        <div class="form-item">
          <label><input type="checkbox" id="commCheck" />Community Engagement</label>
          <br/>
          <label><input type="checkbox" id="psychCheck" />Psychological Counselling</label>
          <br/>
          <label><input type="checkbox" id="vrCheck" />Virtual Reality</label>
        </div>
      </div>
      <div class="buttons-row">
        <button type="button" onclick="openSingleScenario()">Calculate &amp; View Results</button>
      </div>
    </form>
  </div>

  <!-- WTP Results Tab -->
  <div id="wtpTab" class="tabcontent">
    <h2>Willingness to Pay (WTP) Results</h2>
    <p>
      “Among the programme types, community engagement was the most highly valued, with a WTP of A$14.47 
      (SE=3.31, p &lt; 0.001). This indicates that older adults are willing to pay A$14.47 for programmes 
      fostering social interaction and community connections, relative to the reference category of peer 
      support.”
    </p>
    <p>
      Click “Show WTP Plot” to display the bar chart of the main model’s WTP (A$). We have incorporated 
      placeholders for p-values and standard errors in the data, which could be used to overlay error bars.
    </p>
    <div class="buttons-row">
      <button onclick="renderWTPChart()">Show WTP Plot</button>
    </div>
    <div class="chart-grid">
      <div class="chart-box">
        <h3>WTP (A$)</h3>
        <canvas id="wtpChartMain"></canvas>
      </div>
    </div>
  </div>

  <!-- Probability Plot Tab -->
  <div id="probTab" class="tabcontent">
    <h2>Program Uptake Probability</h2>
    <p>
      Press “Show Probability Plot” to recalculate and display a bar chart of your scenario’s predicted 
      programme uptake. For instance, if this chart shows 60%, that suggests <strong>older adults have 
      a 60% chance</strong> of preferring this programme—given its attributes—over an opt-out alternative.
    </p>
    <div class="buttons-row">
      <button onclick="renderProbChart()">Show Probability Plot</button>
    </div>
    <div class="chart-grid">
      <div class="chart-box">
        <h3>Program Uptake Probability</h3>
        <canvas id="probChartMain"></canvas>
      </div>
    </div>
  </div>

  <!-- Costs & Benefits Tab -->
  <div id="costsTab" class="tabcontent">
    <h2>Cost Components &amp; Benefits</h2>
    <p>
      This tool assumes a <strong>A\$5,000</strong> benefit for every 1% increase in programme uptake, plus 
      cost-of-living adjustments if state-based multipliers are selected. Typical costs include:
    </p>
    <ul>
      <li>Personnel (staff salaries, volunteer training)</li>
      <li>Facilities &amp; Equipment (rental, IT, maintenance)</li>
      <li>Marketing &amp; Outreach (advertising, community events)</li>
      <li>Training &amp; Certification (seminars, workshops)</li>
      <li>Miscellaneous Operational Expenses (transport, refreshments, admin)</li>
    </ul>
  </div>

  <!-- Scenarios Tab -->
  <div id="scenariosTab" class="tabcontent">
    <h2>Saved Scenarios</h2>
    <p>
      Save your scenario (from <strong>Inputs</strong>) and compare or export multiple configurations, 
      including cost-benefit charts, in PDF form if desired.
    </p>
    <div class="buttons-row">
      <button onclick="saveScenario()">Save Current Scenario</button>
      <button onclick="openComparison()">Compare All Scenarios</button>
    </div>
    <table id="scenarioTable">
      <thead>
        <tr>
          <th>Name</th>
          <th>State</th>
          <th>Cost Adjust?</th>
          <th>Cost (AUD)</th>
          <th>Local?</th>
          <th>Wider?</th>
          <th>Weekly?</th>
          <th>Monthly?</th>
          <th>Virtual?</th>
          <th>Hybrid?</th>
          <th>2H?</th>
          <th>4H?</th>
          <th>Comm?</th>
          <th>Psych?</th>
          <th>VR?</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
  </div>

  <footer>
    <p>
      &copy; 2025 LonelyLessAustralia. All Rights Reserved. <br/>
      Author: Mesfin Genie, Newcastle Business School, The University of Newcastle, Australia
    </p>
  </footer>
</div>
<script src="script.js"></script>
</body>
</html>
