<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1.0"/>
  <title>LonelyLessAustralia Decision Aid Tool</title>
  <link rel="stylesheet" href="styles.css" />
  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <!-- jsPDF for PDF generation -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
</head>
<body>
<div class="container">
  <header>
    <h1>LonelyLessAustralia Decision Aid Tool</h1>
  </header>

  <div class="tabs">
    <button class="tablink active" onclick="openTab('introTab', this)">Introduction</button>
    <button class="tablink" onclick="openTab('instructionsTab', this)">Instructions</button>
    <button class="tablink" onclick="openTab('attributesTab', this)">Attributes</button>
    <button class="tablink" onclick="openTab('inputsTab', this)">Inputs</button>
    <button class="tablink" onclick="openTab('wtpTab', this)">WTP Results</button>
    <button class="tablink" onclick="openTab('probChartsTab', this)">Probability Plots</button>
    <button class="tablink" onclick="openTab('costsTab', this)">Costs & Benefits</button>
    <button class="tablink" onclick="openTab('scenariosTab', this)">Scenarios</button>
  </div>

  <!-- Introduction Tab -->
  <div id="introTab" class="tabcontent" style="display: block;">
    <div class="intro-box">
      <p>
        Loneliness affects over five million Australians, especially older adults, resulting 
        in serious health and economic burdens. This decision aid tool builds on a discrete 
        choice experiment (DCE) that identified older adults’ preferences for programmes 
        aimed at reducing loneliness in Australia. Using these DCE estimates, the tool 
        predicts uptake probabilities for different programme packages, enabling personalised 
        services based on the factors older adults prioritise when seeking support.
      </p>
      <p>
        The loneliness categories applied in this study come from the 
        <em>De Jong Gierveld Loneliness Scale</em> (11-item version), which measures both 
        emotional and social loneliness. Summing these yields a total loneliness score, 
        subsequently classified into three levels—Not Lonely, Moderately Lonely, and Severely 
        Lonely—for comparing preferences across varying severity.
      </p>
      <p>
        Use the tabs above to explore:
      </p>
      <ul>
        <li><strong>Instructions</strong> – Step-by-step guidance for using the tool.</li>
        <li><strong>Attributes</strong> – Summaries of each DCE attribute.</li>
        <li><strong>Inputs</strong> – Select scenario attributes and see uptake predictions.</li>
        <li><strong>WTP Results</strong> – View WTP bar plots for the main model and by loneliness category.</li>
        <li><strong>Probability Plots</strong> – Visualise predicted uptake probabilities by loneliness category.</li>
        <li><strong>Costs & Benefits</strong> – Explore cost structures and benefits (A\$5,000 per 1% improvement).</li>
        <li><strong>Scenarios</strong> – Save configurations, compare them with advanced charts, or generate PDFs.</li>
      </ul>
    </div>
  </div>

  <!-- Instructions Tab -->
  <div id="instructionsTab" class="tabcontent">
    <h2>How to Use This Tool</h2>
    <p>
      1. Go to the <strong>Attributes</strong> tab to learn about each programme attribute.  
    </p>
    <p>
      2. In the <strong>Inputs</strong> tab, select a state (if any), cost-of-living adjustments, 
      cost per session, accessibility, frequency, method of interaction, session duration, and 
      type of support. These reflect your desired scenario.
    </p>
    <p>
      3. Click “Calculate & View Results” to open a new window showing advanced cost-benefit 
      charts, predicted uptake probabilities, and optional PDF exports.
    </p>
    <p>
      4. If you wish, save the scenario under the <strong>Scenarios</strong> tab, then compare 
      multiple scenarios side by side.
    </p>
    <p>
      5. Go to <strong>WTP Results</strong> to see bar plots illustrating how much individuals 
      would pay for each attribute (main model + by loneliness category).
    </p>
    <p>
      6. Check the <strong>Probability Plots</strong> tab to visualise predicted uptake 
      probabilities by loneliness category (Not Lonely, Moderately Lonely, Severely Lonely) 
      in bar charts.
    </p>
    <p>
      7. In <strong>Costs & Benefits</strong>, learn how we handle cost-of-living multipliers 
      and the A\$5,000 per 1% improvement assumption for benefits.
    </p>
  </div>

  <!-- Attributes Tab -->
  <div id="attributesTab" class="tabcontent">
    <h2>Programme Attributes</h2>
    <p><strong>Cost:</strong> The out-of-pocket cost participants incur each time they join the programme.</p>
    <p><strong>Accessibility:</strong> Mobility/transport considerations, e.g., local area vs. wider community.</p>
    <p><strong>Frequency of Interaction:</strong> How often sessions occur (daily reference, weekly, monthly, etc.).</p>
    <p><strong>Method of Interaction:</strong> In-person, virtual, or hybrid options for those with varying preferences.</p>
    <p><strong>Duration of Each Interaction:</strong> 30 minutes, 2 hours, 4 hours, or other lengths.</p>
    <p><strong>Type of Support Programme:</strong> Peer support, community engagement, counselling, VR, etc.</p>
    <p>
      Cost-of-living multipliers may apply based on state selection. Next, visit the 
      <strong>Inputs</strong> tab to configure your scenario.
    </p>
  </div>

  <!-- Inputs Tab -->
  <div id="inputsTab" class="tabcontent">
    <h2>Programme Inputs</h2>
    <p>
      Select your scenario attributes below, then click “Calculate & View Results” to see 
      predicted probabilities, advanced cost-benefit charts, and more in a new window.
    </p>
    <form id="inputsForm" onsubmit="event.preventDefault();">
      <div class="form-grid">

        <!-- State + CoL -->
        <div class="form-item">
          <label for="state_select">State:</label>
          <select id="state_select">
            <option value="">None</option>
            <option value="NSW">New South Wales (NSW)</option>
            <option value="VIC">Victoria (VIC)</option>
            <option value="QLD">Queensland (QLD)</option>
            <option value="WA">Western Australia (WA)</option>
            <option value="SA">South Australia (SA)</option>
            <option value="TAS">Tasmania (TAS)</option>
            <option value="ACT">Australian Capital Territory (ACT)</option>
            <option value="NT">Northern Territory (NT)</option>
          </select>
          <br/>
          <label for="adjustCosts">Adjust for Cost of Living?</label>
          <select id="adjustCosts">
            <option value="no">No</option>
            <option value="yes">Yes</option>
          </select>
        </div>

        <!-- Cost slider -->
        <div class="form-item">
          <label for="costSlider">
            Cost per Session (AUD): <span id="costLabel">50</span>
          </label>
          <input 
            type="range" 
            id="costSlider" 
            min="0" 
            max="100" 
            step="1" 
            value="50" 
            oninput="updateCostDisplay(this.value)" 
          />
        </div>

        <!-- Accessibility -->
        <div class="form-item">
          <label><input type="checkbox" id="localCheck" />Local Area (12 km)</label>
          <br/>
          <label><input type="checkbox" id="widerCheck" />Wider Community (50+ km)</label>
        </div>

        <!-- Frequency -->
        <div class="form-item">
          <label><input type="checkbox" id="weeklyCheck" />Weekly</label>
          <br/>
          <label><input type="checkbox" id="monthlyCheck" />Monthly</label>
        </div>

        <!-- Method -->
        <div class="form-item">
          <label><input type="checkbox" id="virtualCheck" />Virtual Only</label>
          <br/>
          <label><input type="checkbox" id="hybridCheck" />Hybrid (In-person & Virtual)</label>
        </div>

        <!-- Duration -->
        <div class="form-item">
          <label><input type="checkbox" id="twoHCheck" />2-Hour Session</label>
          <br/>
          <label><input type="checkbox" id="fourHCheck" />4-Hour Session</label>
        </div>

        <!-- Type of Support -->
        <div class="form-item">
          <label><input type="checkbox" id="commCheck" />Community Engagement</label>
          <br/>
          <label><input type="checkbox" id="psychCheck" />Psychological Counselling</label>
          <br/>
          <label><input type="checkbox" id="vrCheck" />Virtual Reality</label>
        </div>

      </div>
      <div class="buttons-row">
        <button type="button" onclick="openSingleScenario()">Calculate & View Results</button>
      </div>
    </form>
  </div>

  <!-- WTP Results Tab -->
  <div id="wtpTab" class="tabcontent">
    <h2>Willingness to Pay (WTP) Results</h2>
    <p>
      We use bar plots to display WTP (A$) from the Error-Component Logit Model for the main 
      population and by loneliness category.
    </p>
    <div class="buttons-row">
      <button onclick="renderWTPCharts()">Show WTP Plots</button>
    </div>
    <div class="chart-grid">
      <div class="chart-box">
        <h3>Main Model</h3>
        <canvas id="wtpChartMain"></canvas>
      </div>
      <div class="chart-box">
        <h3>Not Lonely</h3>
        <canvas id="wtpChartNotLonely"></canvas>
      </div>
      <div class="chart-box">
        <h3>Moderately Lonely</h3>
        <canvas id="wtpChartModLonely"></canvas>
      </div>
      <div class="chart-box">
        <h3>Severely Lonely</h3>
        <canvas id="wtpChartSevLonely"></canvas>
      </div>
    </div>
  </div>

  <!-- Probability Plots Tab -->
  <div id="probChartsTab" class="tabcontent">
    <h2>Predicted Uptake Probability Plots</h2>
    <p>
      View bar charts illustrating uptake probabilities for the main population and each 
      loneliness category (Not Lonely, Moderately Lonely, Severely Lonely). 
    </p>
    <div class="buttons-row">
      <button onclick="renderProbCharts()">Show Probability Plots</button>
    </div>
    <div class="chart-grid">
      <div class="chart-box">
        <h3>Main Model Probability</h3>
        <canvas id="probChartMain"></canvas>
      </div>
      <div class="chart-box">
        <h3>Not Lonely</h3>
        <canvas id="probChartNotLonely"></canvas>
      </div>
      <div class="chart-box">
        <h3>Moderately Lonely</h3>
        <canvas id="probChartModLonely"></canvas>
      </div>
      <div class="chart-box">
        <h3>Severely Lonely</h3>
        <canvas id="probChartSevLonely"></canvas>
      </div>
    </div>
  </div>

  <!-- Costs & Benefits Tab -->
  <div id="costsTab" class="tabcontent">
    <h2>Cost Components & Benefits</h2>
    <p>
      We assume a cost-of-living multiplier by state and a benefit of <strong>A\$5,000 for each 
      1% improvement</strong> in programme uptake. Cost components generally include:
    </p>
    <ul>
      <li>Staff/Personnel</li>
      <li>Facilities & Equipment</li>
      <li>Marketing & Outreach</li>
      <li>Training & Certification</li>
      <li>Miscellaneous Operational Expenses</li>
      <li>Cost-of-Living Multipliers (if selected)</li>
    </ul>
    <p>
      These represent a realistic baseline for financial calculations in the tool.
    </p>
  </div>

  <!-- Scenarios Tab -->
  <div id="scenariosTab" class="tabcontent">
    <h2>Saved Scenarios</h2>
    <p>
      Click “Save Current Scenario” under <strong>Inputs</strong> to store your scenario, 
      then compare multiple scenarios here using advanced cost-benefit charts or PDF exports.
    </p>
    <div class="buttons-row">
      <button onclick="saveScenario()">Save Current Scenario</button>
      <button onclick="openComparison()">Compare All Scenarios</button>
    </div>
    <table id="scenarioTable">
      <thead>
        <tr>
          <th>Name</th>
          <th>State</th>
          <th>Cost Adjust?</th>
          <th>Cost (AUD)</th>
          <th>Local?</th>
          <th>Wider?</th>
          <th>Weekly?</th>
          <th>Monthly?</th>
          <th>Virtual?</th>
          <th>Hybrid?</th>
          <th>2H?</th>
          <th>4H?</th>
          <th>Comm?</th>
          <th>Psych?</th>
          <th>VR?</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
  </div>

  <footer>
    <p>
      &copy; 2025 LonelyLessAustralia. All Rights Reserved. <br/>
      Author: Mesfin Genie, Newcastle Business School, The University of Newcastle, Australia
    </p>
  </footer>
</div>
<!-- Reference script file -->
<script src="script.js"></script>
</body>
</html>
