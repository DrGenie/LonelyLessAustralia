<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1.0"/>
  <title>LonelyLessAustralia Decision Aid Tool</title>
  <link rel="stylesheet" href="styles.css" />
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
</head>
<body>
<div class="container">
  <header>
    <h1>LonelyLessAustralia Decision Aid Tool</h1>
  </header>

  <div class="tabs">
    <button class="tablink active" onclick="openTab('introTab', this)">Introduction</button>
    <button class="tablink" onclick="openTab('instructionsTab', this)">Instructions</button>
    <button class="tablink" onclick="openTab('attributesTab', this)">Attributes</button>
    <button class="tablink" onclick="openTab('inputsTab', this)">Inputs</button>
    <button class="tablink" onclick="openTab('wtpTab', this)">WTP Results</button>
    <button class="tablink" onclick="openTab('probChartsTab', this)">Program Uptake Probability</button>
    <button class="tablink" onclick="openTab('costsTab', this)">Costs & Benefits</button>
    <button class="tablink" onclick="openTab('scenariosTab', this)">Scenarios</button>
  </div>

  <!-- Introduction Tab -->
  <div id="introTab" class="tabcontent" style="display: block;">
    <div class="intro-box">
      <p>
        Loneliness affects over five million Australians, especially older adults, resulting 
        in serious health and economic burdens. This decision aid tool is based on a discrete 
        choice experiment (DCE) that identified older adults’ preferences for programmes aimed 
        at reducing loneliness in Australia. Using these DCE estimates, the tool 
        predicts uptake probabilities for various programme packages, offering personalised 
        services based on the factors older adults prioritise when seeking support.
      </p>
      <p>
        The loneliness categories used in this study were derived from the 
        <em>De Jong Gierveld Loneliness Scale</em> (11-item version), which measures emotional 
        and social loneliness. Summing these yields a total loneliness score, subsequently 
        classified into three levels—Not Lonely, Moderately Lonely, and Severely Lonely—for 
        more nuanced comparisons across different severity categories.
      </p>
      <p>Please use the tabs above to navigate.</p>
    </div>
  </div>

  <!-- Instructions Tab -->
  <div id="instructionsTab" class="tabcontent">
    <h2>How to Use This Tool</h2>
    <p>
      1. Read about <strong>Attributes</strong> for each programme dimension.
    </p>
    <p>
      2. In <strong>Inputs</strong>, select your state, cost-of-living, cost per session, 
      accessibility, frequency, method, duration, and type of support. 
    </p>
    <p>
      3. Click “Calculate &amp; View Results” to open detailed cost-benefit charts, 
      predicted probabilities, and optional PDF exports in a new window.
    </p>
    <p>
      4. Save your scenario in the <strong>Scenarios</strong> tab to compare multiple 
      configurations side by side.
    </p>
    <p>
      5. The <strong>WTP Results</strong> tab shows bar charts for willingness to pay, 
      for both the main model and each loneliness category.
    </p>
    <p>
      6. The <strong>Program Uptake Probability</strong> tab displays bar charts 
      illustrating predicted probabilities for your current inputs (main model and by loneliness group).
    </p>
    <p>
      7. The <strong>Costs &amp; Benefits</strong> tab explains cost-of-living 
      assumptions and the A\$5,000 per 1% improvement benefit baseline.
    </p>
  </div>

  <!-- Attributes Tab -->
  <div id="attributesTab" class="tabcontent">
    <h2>Programme Attributes</h2>
    <p><strong>Cost:</strong> Out-of-pocket cost per session for participants.</p>
    <p><strong>Accessibility:</strong> Local area vs. wider community (distance & mobility constraints).</p>
    <p><strong>Frequency of Interaction:</strong> Daily reference, weekly, monthly, etc.</p>
    <p><strong>Method of Interaction:</strong> In-person, virtual-only, or hybrid approach.</p>
    <p><strong>Duration of Each Interaction:</strong> 30 minutes (reference), 2 hours, 4 hours, etc.</p>
    <p><strong>Type of Support Programme:</strong> Peer support, community engagement, counselling, VR, etc.</p>
  </div>

  <!-- Inputs Tab -->
  <div id="inputsTab" class="tabcontent">
    <h2>Programme Inputs</h2>
    <p>Set your scenario’s attributes below, then click “Calculate &amp; View Results” to open a new window with cost-benefit charts and probabilities.</p>

    <form id="inputsForm" onsubmit="event.preventDefault();">
      <div class="form-grid">
        
        <!-- State + Cost-of-Living -->
        <div class="form-item">
          <label for="state_select">State:</label>
          <select id="state_select">
            <option value="">None</option>
            <option value="NSW">New South Wales (NSW)</option>
            <option value="VIC">Victoria (VIC)</option>
            <option value="QLD">Queensland (QLD)</option>
            <option value="WA">Western Australia (WA)</option>
            <option value="SA">South Australia (SA)</option>
            <option value="TAS">Tasmania (TAS)</option>
            <option value="ACT">Australian Capital Territory (ACT)</option>
            <option value="NT">Northern Territory (NT)</option>
          </select>
          <br/>
          <label for="adjustCosts">Adjust for Cost of Living?</label>
          <select id="adjustCosts">
            <option value="no">No</option>
            <option value="yes">Yes</option>
          </select>
        </div>

        <!-- Cost Slider -->
        <div class="form-item">
          <label for="costSlider">
            Cost per Session (AUD): <span id="costLabel">50</span>
          </label>
          <input 
            type="range" 
            id="costSlider" 
            min="0" 
            max="100" 
            step="1" 
            value="50" 
            oninput="updateCostDisplay(this.value)" 
          />
        </div>

        <!-- Accessibility -->
        <div class="form-item">
          <label><input type="checkbox" id="localCheck" />Local Area (12 km)</label>
          <br/>
          <label><input type="checkbox" id="widerCheck" />Wider Community (50+ km)</label>
        </div>

        <!-- Frequency -->
        <div class="form-item">
          <label><input type="checkbox" id="weeklyCheck" />Weekly</label>
          <br/>
          <label><input type="checkbox" id="monthlyCheck" />Monthly</label>
        </div>

        <!-- Method -->
        <div class="form-item">
          <label><input type="checkbox" id="virtualCheck" />Virtual Only</label>
          <br/>
          <label><input type="checkbox" id="hybridCheck" />Hybrid (In-person &amp; Virtual)</label>
        </div>

        <!-- Duration -->
        <div class="form-item">
          <label><input type="checkbox" id="twoHCheck" />2-Hour Session</label>
          <br/>
          <label><input type="checkbox" id="fourHCheck" />4-Hour Session</label>
        </div>

        <!-- Programme Type -->
        <div class="form-item">
          <label><input type="checkbox" id="commCheck" />Community Engagement</label>
          <br/>
          <label><input type="checkbox" id="psychCheck" />Psychological Counselling</label>
          <br/>
          <label><input type="checkbox" id="vrCheck" />Virtual Reality</label>
        </div>

      </div>
      <div class="buttons-row">
        <button type="button" onclick="openSingleScenario()">Calculate &amp; View Results</button>
      </div>
    </form>
  </div>

  <!-- WTP Results Tab -->
  <div id="wtpTab" class="tabcontent">
    <h2>Willingness to Pay (WTP) Results</h2>
    <p>
      Click “Show WTP Plots” to load bar charts displaying WTP for the main model and each loneliness category.
    </p>
    <div class="buttons-row">
      <button onclick="renderWTPCharts()">Show WTP Plots</button>
    </div>
    <div class="chart-grid">
      <div class="chart-box">
        <h3>Main Model</h3>
        <canvas id="wtpChartMain"></canvas>
      </div>
      <div class="chart-box">
        <h3>Not Lonely</h3>
        <canvas id="wtpChartNotLonely"></canvas>
      </div>
      <div class="chart-box">
        <h3>Moderately Lonely</h3>
        <canvas id="wtpChartModLonely"></canvas>
      </div>
      <div class="chart-box">
        <h3>Severely Lonely</h3>
        <canvas id="wtpChartSevLonely"></canvas>
      </div>
    </div>
  </div>

  <!-- Probability Plots Tab -->
  <div id="probChartsTab" class="tabcontent">
    <h2>Program Uptake Probability</h2>
    <p>
      Click “Show Program Probability Uptake Plots” to compute and display bar charts of 
      predicted programme uptake for your current inputs: main model and each loneliness category.
    </p>
    <div class="buttons-row">
      <button onclick="renderProbCharts()">Show Program Probability Uptake Plots</button>
    </div>
    <div class="chart-grid">
      <div class="chart-box">
        <h3>Main Model Probability</h3>
        <canvas id="probChartMain"></canvas>
      </div>
      <div class="chart-box">
        <h3>Not Lonely</h3>
        <canvas id="probChartNotLonely"></canvas>
      </div>
      <div class="chart-box">
        <h3>Moderately Lonely</h3>
        <canvas id="probChartModLonely"></canvas>
      </div>
      <div class="chart-box">
        <h3>Severely Lonely</h3>
        <canvas id="probChartSevLonely"></canvas>
      </div>
    </div>
  </div>

  <!-- Costs & Benefits Tab -->
  <div id="costsTab" class="tabcontent">
    <h2>Cost Components &amp; Benefits</h2>
    <p>
      We assume <strong>A\$5,000</strong> for each 1% improvement in programme uptake, and 
      cost-of-living multipliers by state if selected. Costs typically include:
    </p>
    <ul>
      <li>Staff/Personnel</li>
      <li>Facilities &amp; Equipment</li>
      <li>Marketing &amp; Outreach</li>
      <li>Training &amp; Certification</li>
      <li>Miscellaneous Operational Expenses</li>
    </ul>
  </div>

  <!-- Scenarios Tab -->
  <div id="scenariosTab" class="tabcontent">
    <h2>Saved Scenarios</h2>
    <p>
      Save your current scenario under <strong>Inputs</strong>, then compare multiple 
      scenarios with advanced cost-benefit charts or PDF exports.
    </p>
    <div class="buttons-row">
      <button onclick="saveScenario()">Save Current Scenario</button>
      <button onclick="openComparison()">Compare All Scenarios</button>
    </div>
    <table id="scenarioTable">
      <thead>
        <tr>
          <th>Name</th>
          <th>State</th>
          <th>Cost Adjust?</th>
          <th>Cost (AUD)</th>
          <th>Local?</th>
          <th>Wider?</th>
          <th>Weekly?</th>
          <th>Monthly?</th>
          <th>Virtual?</th>
          <th>Hybrid?</th>
          <th>2H?</th>
          <th>4H?</th>
          <th>Comm?</th>
          <th>Psych?</th>
          <th>VR?</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
  </div>

  <footer>
    <p>
      &copy; 2025 LonelyLessAustralia. All Rights Reserved. <br/>
      Author: Mesfin Genie, Newcastle Business School, The University of Newcastle, Australia
    </p>
  </footer>
</div>
<script src="script.js"></script>
</body>
</html>
