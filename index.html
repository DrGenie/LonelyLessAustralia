<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1.0"/>
  <title>LonelyLessAustralia Decision Aid Tool</title>
  <link rel="stylesheet" href="styles.css" />
  <!-- Chart.js for charts -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <!-- jsPDF for PDF generation -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
</head>
<body>
<div class="container">
  <header>
    <h1>LonelyLessAustralia Decision Aid Tool</h1>
  </header>

  <div class="tabs">
    <button class="tablink active" onclick="openTab('introTab', this)">Introduction</button>
    <button class="tablink" onclick="openTab('attributesTab', this)">Attributes</button>
    <button class="tablink" onclick="openTab('inputsTab', this)">Inputs</button>
    <button class="tablink" onclick="openTab('wtpTab', this)">WTP Results</button>
    <button class="tablink" onclick="openTab('costsTab', this)">Costs & Benefits</button>
    <button class="tablink" onclick="openTab('scenariosTab', this)">Scenarios</button>
  </div>

  <!-- INTRODUCTION TAB -->
  <div id="introTab" class="tabcontent">
    <div class="intro-box">
      <p>
        Loneliness affects over five million Australians, especially older adults, leading 
        to significant health and economic challenges. This online decision aid tool was 
        developed from a discrete choice experiment that identified older adults’ preferences 
        for various support programmes designed to reduce loneliness in Australia. Utilising 
        the DCE’s insights and estimates, the tool predicts the probability of uptake for 
        different programme packages, enabling personalised support services based on the key 
        factors older adults consider when seeking support.
      </p>
      <p>
        The loneliness categories used in this study were derived from the widely validated 
        <em>De Jong Gierveld Loneliness Scale</em> (11-item version), which measures both 
        emotional and social loneliness. A total loneliness score was calculated as the sum 
        of emotional and social loneliness scores, reflecting an individual’s overall level 
        of loneliness. Following the established methodology of the De Jong Gierveld scale, 
        the total loneliness score was categorised into three distinct levels—Not Lonely, 
        Moderately Lonely, and Severely Lonely—to enable meaningful comparisons across 
        varying degrees of loneliness.
      </p>
      <p>
        You can navigate using the tabs above to learn about the attributes, set up your 
        scenario inputs, view WTP data, examine costs & benefits, and save or compare 
        scenarios.
      </p>
    </div>
  </div>

  <!-- ATTRIBUTES TAB -->
  <div id="attributesTab" class="tabcontent">
    <h2>Programme Attributes</h2>
    <p><strong>Cost:</strong> The out-of-pocket cost participants will incur each time they participate in the support programme.</p>
    <p><strong>Accessibility:</strong> The ease of accessing the programme, considering physical mobility and transportation (e.g., local area vs. wider community).</p>
    <p><strong>Frequency of Interaction:</strong> How often individuals will participate (e.g., weekly, monthly, or daily reference).</p>
    <p><strong>Method of Interaction:</strong> How individuals prefer to connect, accommodating those who prefer virtual or hybrid options.</p>
    <p><strong>Duration of Each Interaction:</strong> The length of each session or activity (e.g., 30 minutes, 2 hours, 4 hours).</p>
    <p><strong>Type of Support Programme:</strong> How participants connect with others and the kinds of activities involved (e.g., peer support, community engagement, psychological counselling, or virtual reality).</p>
    <p>
      Cost-of-living adjustments apply based on the state selected. Proceed to the <strong>Inputs</strong> tab to configure a scenario.
    </p>
  </div>

  <!-- INPUTS TAB -->
  <div id="inputsTab" class="tabcontent">
    <h2>Programme Inputs</h2>
    <p>
      Select or configure the scenario attributes below, then click “Calculate & View Results” 
      to open a results window with predicted probabilities by loneliness category, cost-benefit 
      analysis, and advanced charts.
    </p>

    <form id="inputsForm" onsubmit="event.preventDefault();">
      <div class="form-grid">
        <!-- State & Cost-of-Living -->
        <div class="form-item">
          <label for="state_select">State:</label>
          <select id="state_select">
            <option value="">None</option>
            <option value="NSW">New South Wales (NSW)</option>
            <option value="VIC">Victoria (VIC)</option>
            <option value="QLD">Queensland (QLD)</option>
            <option value="WA">Western Australia (WA)</option>
            <option value="SA">South Australia (SA)</option>
            <option value="TAS">Tasmania (TAS)</option>
            <option value="ACT">Australian Capital Territory (ACT)</option>
            <option value="NT">Northern Territory (NT)</option>
          </select>
          <br/>
          <label for="adjustCosts">Adjust for Cost of Living?</label>
          <select id="adjustCosts">
            <option value="no">No</option>
            <option value="yes">Yes</option>
          </select>
        </div>

        <!-- Cost Slider -->
        <div class="form-item">
          <label for="costSlider">Cost per Session (A$): <span id="costLabel">50</span></label>
          <input 
            type="range" 
            id="costSlider" 
            min="0" max="100" 
            step="1" value="50" 
            oninput="updateCostDisplay(this.value)" 
          />
        </div>

        <!-- Accessibility -->
        <div class="form-item">
          <label><input type="checkbox" id="localCheck" />Local Area (12 km)</label>
          <br/>
          <label><input type="checkbox" id="widerCheck" />Wider Community (50+ km)</label>
        </div>

        <!-- Frequency -->
        <div class="form-item">
          <label><input type="checkbox" id="weeklyCheck" />Weekly</label>
          <br/>
          <label><input type="checkbox" id="monthlyCheck" />Monthly</label>
        </div>

        <!-- Method -->
        <div class="form-item">
          <label><input type="checkbox" id="virtualCheck" />Virtual Only</label>
          <br/>
          <label><input type="checkbox" id="hybridCheck" />Hybrid (In-Person & Virtual)</label>
        </div>

        <!-- Duration -->
        <div class="form-item">
          <label><input type="checkbox" id="twoHCheck" />2-Hour Session</label>
          <br/>
          <label><input type="checkbox" id="fourHCheck" />4-Hour Session</label>
        </div>

        <!-- Type of Support -->
        <div class="form-item">
          <label><input type="checkbox" id="commCheck" />Community Engagement</label>
          <br/>
          <label><input type="checkbox" id="psychCheck" />Psychological Counselling</label>
          <br/>
          <label><input type="checkbox" id="vrCheck" />Virtual Reality</label>
        </div>
      </div>

      <div class="buttons-row">
        <button type="button" onclick="openSingleScenario()">Calculate & View Results</button>
      </div>
    </form>
  </div>

  <!-- WTP RESULTS TAB -->
  <div id="wtpTab" class="tabcontent">
    <h2>Willingness to Pay (WTP) Results</h2>
    <p>
      WTP reflects how much individuals are willing to pay for specific programme features. 
      Below are the main model estimates (Table 4) and the results by loneliness category 
      (Table 6).
    </p>

    <!-- Main Model WTP (Table 4) -->
    <h3>Main Model (Table 4)</h3>
    <table class="wtpTable">
      <thead>
        <tr>
          <th>Attribute</th>
          <th>WTP (A$)</th>
          <th>Std. Error</th>
          <th>P-value</th>
        </tr>
      </thead>
      <tbody id="wtpBodyMain"></tbody>
    </table>

    <!-- WTP by Loneliness Categories (Table 6) -->
    <h3>Not Lonely</h3>
    <table class="wtpTable">
      <thead>
        <tr>
          <th>Attribute</th>
          <th>WTP (A$)</th>
          <th>Std. Error</th>
          <th>P-value</th>
          <th>Sig?</th>
        </tr>
      </thead>
      <tbody id="wtpBodyNotLonely"></tbody>
    </table>

    <h3>Moderately Lonely</h3>
    <table class="wtpTable">
      <thead>
        <tr>
          <th>Attribute</th>
          <th>WTP (A$)</th>
          <th>Std. Error</th>
          <th>P-value</th>
          <th>Sig?</th>
        </tr>
      </thead>
      <tbody id="wtpBodyModLonely"></tbody>
    </table>

    <h3>Severely Lonely</h3>
    <table class="wtpTable">
      <thead>
        <tr>
          <th>Attribute</th>
          <th>WTP (A$)</th>
          <th>Std. Error</th>
          <th>P-value</th>
          <th>Sig?</th>
        </tr>
      </thead>
      <tbody id="wtpBodySevLonely"></tbody>
    </table>
  </div>

  <!-- COSTS & BENEFITS TAB -->
  <div id="costsTab" class="tabcontent">
    <h2>Cost Components & Benefits</h2>
    <p>
      Our approach calculates cost-of-living adjustments based on the user’s selected state. 
      We also measure estimated benefits by assigning a monetary value (e.g., 10,000 A$) per 
      1% increase in predicted uptake. Below, you can see an example advanced chart for 
      cost-benefit analysis (CBA).
    </p>
    <canvas id="cbaChart" style="max-width:600px; margin:20px auto; display:block;"></canvas>
    <p>
      This chart compares the total cost and total benefits for the last-calculated scenario. 
      Net benefit is also shown. If no scenario is calculated, the chart will show placeholder data.
    </p>
    <button onclick="downloadCBAPDF()">Download CBA as PDF</button>
  </div>

  <!-- SCENARIOS TAB -->
  <div id="scenariosTab" class="tabcontent">
    <h2>Saved Scenarios</h2>
    <p>
      After configuring your scenario in <strong>Inputs</strong> and viewing the results, 
      you can save it here for future reference. You can also compare multiple scenarios 
      in another window, with PDF chart exports. 
    </p>
    <div class="buttons-row">
      <button onclick="saveScenario()">Save Current Scenario</button>
      <button onclick="openComparison()">Compare All Scenarios</button>
    </div>

    <table id="scenarioTable">
      <thead>
        <tr>
          <th>Name</th>
          <th>State</th>
          <th>Cost Adjust?</th>
          <th>Cost (A$)</th>
          <th>Local?</th>
          <th>Wider?</th>
          <th>Weekly?</th>
          <th>Monthly?</th>
          <th>Virtual?</th>
          <th>Hybrid?</th>
          <th>2H?</th>
          <th>4H?</th>
          <th>Comm?</th>
          <th>Psych?</th>
          <th>VR?</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
  </div>

  <footer>
    <p>&copy; 2025 LonelyLessAustralia. All Rights Reserved.</p>
  </footer>
</div>
<script src="script.js"></script>
</body>
</html>
